2026-01-20 10:11:49,487 - INFO - ================================================================================
2026-01-20 10:11:49,487 - INFO - Initializing Kite Data Fetcher Server
2026-01-20 10:11:49,487 - INFO - ================================================================================
2026-01-20 10:11:49,487 - INFO - Loading environment variables from .env file
2026-01-20 10:11:49,488 - INFO - API_KEY loaded: lo8381a8...
2026-01-20 10:11:49,488 - INFO - üìã Loading configuration from config.json...
2026-01-20 10:11:49,488 - INFO - ‚úì Configuration loaded successfully
2026-01-20 10:11:49,488 - INFO -   üìà Instrument: BANKNIFTY26JAN59300PE
2026-01-20 10:11:49,488 - INFO -   üè¢ Exchange: NFO
2026-01-20 10:11:49,488 - INFO -   üìä Type: PE
2026-01-20 10:11:49,488 - INFO -   üìè High-Low Diff: 35.0
2026-01-20 10:11:49,488 - INFO -   üéØ Target: 10.0
2026-01-20 10:11:49,488 - INFO -   üì¶ Lots: 2
2026-01-20 10:11:49,488 - INFO -   üì¶ Lot Size: 30
2026-01-20 10:11:49,488 - INFO -   üì¶ Total Quantity: 60
2026-01-20 10:11:49,488 - INFO -   üíº Trading Mode: PAPER
2026-01-20 10:11:49,488 - INFO - üìä Trading Mode: PAPER
2026-01-20 10:11:49,488 - INFO - üì¶ Trade Quantity: 2 lot(s)
2026-01-20 10:11:49,488 - INFO - üîÑ Retry Interval: 300 seconds
2026-01-20 10:11:49,488 - INFO - ‚è±Ô∏è  Fetch Interval: 300 seconds (5-min aligned + 10s delay)
2026-01-20 10:11:49,488 - INFO - üìÅ Candles Data File: candles_data.json
2026-01-20 10:11:49,488 - INFO - üìÅ Trades Log File: trades.json
2026-01-20 10:11:49,488 - INFO - üìß Email Notifications: Enabled
2026-01-20 10:11:49,488 - INFO - ================================================================================
2026-01-20 10:11:49,488 - INFO - ================================================================================
2026-01-20 10:11:49,488 - INFO - STARTING KITE DATA FETCHER & TRADING SERVER
2026-01-20 10:11:49,488 - INFO - ================================================================================
2026-01-20 10:11:49,488 - INFO - Attempting to connect to Kite API...
2026-01-20 10:11:49,488 - INFO - Reading access token from file: access_token.txt
2026-01-20 10:11:49,488 - INFO - Access token loaded: JMrhfgQBfb...
2026-01-20 10:11:49,488 - INFO - Initializing KiteConnect instance
2026-01-20 10:11:49,488 - INFO - Setting access token
2026-01-20 10:11:49,488 - INFO - Fetching PE instrument...
2026-01-20 10:11:49,488 - INFO - Fetching option instrument: BANKNIFTY26JAN59300PE...
2026-01-20 10:11:50,141 - INFO - ‚úì Selected Option: BANKNIFTY26JAN59300PE
2026-01-20 10:11:50,141 - INFO -   Instrument Token: 13300482
2026-01-20 10:11:50,141 - INFO -   Strike: 59300.0
2026-01-20 10:11:50,141 - INFO -   Expiry: 2026-01-27
2026-01-20 10:11:50,141 - INFO -   Lot Size: 30 units per lot
2026-01-20 10:11:50,141 - INFO -   Trading: 2 lot(s) = 60 units
2026-01-20 10:11:50,146 - INFO - üîå Setting up WebSocket connection...
2026-01-20 10:11:50,259 - INFO - ‚úì WebSocket connected successfully
2026-01-20 10:11:50,259 - INFO - üì° Subscribed to BANKNIFTY26JAN59300PE (13300482)
2026-01-20 10:11:50,259 - INFO - üìä WebSocket Mode: FULL (real-time OHLC + LTP for entry triggers)
2026-01-20 10:11:52,151 - INFO - ‚úì WebSocket setup complete
2026-01-20 10:11:52,151 - INFO - ‚úì Kite API connection established successfully
2026-01-20 10:11:52,151 - INFO - ‚è∞ Current time: 10:11:52
2026-01-20 10:11:52,151 - INFO - ‚è∞ Next candle completes at: 10:15:00
2026-01-20 10:11:52,151 - INFO - ‚è∞ Will fetch at: 10:15:10 (+10s delay)
2026-01-20 10:11:52,152 - INFO - ‚è∞ Waiting 197 seconds...
2026-01-20 10:11:52,152 - INFO - ‚è≥ Waiting for next 5-minute interval before first fetch...
2026-01-20 10:15:10,006 - INFO - üîÑ Starting data fetch at 10:15:10
2026-01-20 10:15:10,007 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:15:10,007 - INFO - Starting historical data fetch...
2026-01-20 10:15:10,007 - INFO - Instrument Token (int): 13300482
2026-01-20 10:15:10,007 - INFO - Fetching data from last 10 days (up to now)...
2026-01-20 10:15:10,008 - INFO - From: 2026-01-10 10:15:10
2026-01-20 10:15:10,008 - INFO - To: 2026-01-20 10:15:10
2026-01-20 10:15:10,008 - INFO - Interval: 5minute
2026-01-20 10:15:10,008 - INFO - Calling Kite API for historical data...
2026-01-20 10:15:10,085 - INFO - ‚úì Received 388 candles from API
2026-01-20 10:15:10,085 - INFO - ‚ÑπÔ∏è  Excluding current candle (still forming) - using 387 complete candles
2026-01-20 10:15:10,085 - INFO - Calculating RSI (14-period) on complete candles...
2026-01-20 10:15:10,092 - INFO - üìä Latest RSI: 59.15
2026-01-20 10:15:10,092 - INFO - üìä Filtered latest 14 candles
2026-01-20 10:15:10,092 - INFO - üìÖ Data range: 2026-01-19 15:20 to 2026-01-20 10:10
2026-01-20 10:15:10,092 - INFO - Processing candle data with RSI...
2026-01-20 10:15:10,092 - INFO - üîç Checking order conditions...
2026-01-20 10:15:10,092 - INFO - ‚ÑπÔ∏è  TRADE SKIPPED - RSI not available or first calculation
2026-01-20 10:15:10,092 - INFO - Saving 14 candles to candles_data.json...
2026-01-20 10:15:10,093 - INFO - ‚úì Successfully saved 14 candles to candles_data.json
2026-01-20 10:15:10,093 - INFO - File size: 2320 bytes
2026-01-20 10:15:10,093 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:15:10,093 - INFO - üìä LATEST CANDLE SUMMARY:
2026-01-20 10:15:10,093 - INFO -   üïê Date: 2026-01-20T10:10:00+05:30
2026-01-20 10:15:10,093 - INFO -   üíπ Open: 191.25
2026-01-20 10:15:10,093 - INFO -   ‚¨ÜÔ∏è  High: 200.1
2026-01-20 10:15:10,093 - INFO -   ‚¨áÔ∏è  Low: 184
2026-01-20 10:15:10,093 - INFO -   üíµ Close: 196.85
2026-01-20 10:15:10,093 - INFO -   üì¶ Volume: 25290
2026-01-20 10:15:10,093 - INFO -   üìà RSI: 59.151433762533465
2026-01-20 10:15:10,093 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:15:10,093 - INFO - ‚úì Data fetch complete at 10:15:10
2026-01-20 10:15:10,093 - INFO - ================================================================================
2026-01-20 10:15:10,093 - INFO - ‚è∞ Current time: 10:15:10
2026-01-20 10:15:10,093 - INFO - ‚è∞ Next candle completes at: 10:20:00
2026-01-20 10:15:10,093 - INFO - ‚è∞ Will fetch at: 10:20:10 (+10s delay)
2026-01-20 10:15:10,093 - INFO - ‚è∞ Waiting 299 seconds...
2026-01-20 10:20:10,007 - INFO - üîÑ Starting data fetch at 10:20:10
2026-01-20 10:20:10,007 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:20:10,007 - INFO - Starting historical data fetch...
2026-01-20 10:20:10,007 - INFO - Instrument Token (int): 13300482
2026-01-20 10:20:10,007 - INFO - Fetching data from last 10 days (up to now)...
2026-01-20 10:20:10,007 - INFO - From: 2026-01-10 10:20:10
2026-01-20 10:20:10,007 - INFO - To: 2026-01-20 10:20:10
2026-01-20 10:20:10,007 - INFO - Interval: 5minute
2026-01-20 10:20:10,007 - INFO - Calling Kite API for historical data...
2026-01-20 10:20:10,164 - INFO - ‚úì Received 389 candles from API
2026-01-20 10:20:10,164 - INFO - ‚ÑπÔ∏è  Excluding current candle (still forming) - using 388 complete candles
2026-01-20 10:20:10,164 - INFO - Calculating RSI (14-period) on complete candles...
2026-01-20 10:20:10,168 - INFO - üìä Latest RSI: 55.07
2026-01-20 10:20:10,168 - INFO - üìä Filtered latest 14 candles
2026-01-20 10:20:10,168 - INFO - üìÖ Data range: 2026-01-19 15:25 to 2026-01-20 10:15
2026-01-20 10:20:10,168 - INFO - Processing candle data with RSI...
2026-01-20 10:20:10,168 - INFO - üîç Checking order conditions...
2026-01-20 10:20:10,168 - INFO - ‚ÑπÔ∏è  NO ALERT - No RSI crossover detected
2026-01-20 10:20:10,168 - INFO -    Previous RSI: 59.15 | Current RSI: 55.07
2026-01-20 10:20:10,168 - INFO -    RSI between 40-60 (neutral zone)
2026-01-20 10:20:10,169 - INFO - Saving 14 candles to candles_data.json...
2026-01-20 10:20:10,169 - INFO - ‚úì Successfully saved 14 candles to candles_data.json
2026-01-20 10:20:10,169 - INFO - File size: 2318 bytes
2026-01-20 10:20:10,169 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:20:10,169 - INFO - üìä LATEST CANDLE SUMMARY:
2026-01-20 10:20:10,169 - INFO -   üïê Date: 2026-01-20T10:15:00+05:30
2026-01-20 10:20:10,169 - INFO -   üíπ Open: 196.85
2026-01-20 10:20:10,169 - INFO -   ‚¨ÜÔ∏è  High: 203.1
2026-01-20 10:20:10,169 - INFO -   ‚¨áÔ∏è  Low: 188
2026-01-20 10:20:10,169 - INFO -   üíµ Close: 190.55
2026-01-20 10:20:10,169 - INFO -   üì¶ Volume: 27540
2026-01-20 10:20:10,169 - INFO -   üìà RSI: 55.07367606648154
2026-01-20 10:20:10,169 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:20:10,170 - INFO - ‚úì Data fetch complete at 10:20:10
2026-01-20 10:20:10,170 - INFO - ================================================================================
2026-01-20 10:20:10,170 - INFO - ‚è∞ Current time: 10:20:10
2026-01-20 10:20:10,170 - INFO - ‚è∞ Next candle completes at: 10:25:00
2026-01-20 10:20:10,170 - INFO - ‚è∞ Will fetch at: 10:25:10 (+10s delay)
2026-01-20 10:20:10,170 - INFO - ‚è∞ Waiting 299 seconds...
2026-01-20 10:25:10,005 - INFO - üîÑ Starting data fetch at 10:25:10
2026-01-20 10:25:10,005 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:25:10,005 - INFO - Starting historical data fetch...
2026-01-20 10:25:10,005 - INFO - Instrument Token (int): 13300482
2026-01-20 10:25:10,005 - INFO - Fetching data from last 10 days (up to now)...
2026-01-20 10:25:10,006 - INFO - From: 2026-01-10 10:25:10
2026-01-20 10:25:10,006 - INFO - To: 2026-01-20 10:25:10
2026-01-20 10:25:10,006 - INFO - Interval: 5minute
2026-01-20 10:25:10,006 - INFO - Calling Kite API for historical data...
2026-01-20 10:25:10,096 - INFO - ‚úì Received 390 candles from API
2026-01-20 10:25:10,096 - INFO - ‚ÑπÔ∏è  Excluding current candle (still forming) - using 389 complete candles
2026-01-20 10:25:10,096 - INFO - Calculating RSI (14-period) on complete candles...
2026-01-20 10:25:10,099 - INFO - üìä Latest RSI: 55.18
2026-01-20 10:25:10,099 - INFO - üìä Filtered latest 14 candles
2026-01-20 10:25:10,099 - INFO - üìÖ Data range: 2026-01-20 09:15 to 2026-01-20 10:20
2026-01-20 10:25:10,099 - INFO - Processing candle data with RSI...
2026-01-20 10:25:10,099 - INFO - üîç Checking order conditions...
2026-01-20 10:25:10,099 - INFO - ‚ÑπÔ∏è  NO ALERT - No RSI crossover detected
2026-01-20 10:25:10,099 - INFO -    Previous RSI: 55.07 | Current RSI: 55.18
2026-01-20 10:25:10,099 - INFO -    RSI between 40-60 (neutral zone)
2026-01-20 10:25:10,099 - INFO - Saving 14 candles to candles_data.json...
2026-01-20 10:25:10,100 - INFO - ‚úì Successfully saved 14 candles to candles_data.json
2026-01-20 10:25:10,100 - INFO - File size: 2322 bytes
2026-01-20 10:25:10,100 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:25:10,100 - INFO - üìä LATEST CANDLE SUMMARY:
2026-01-20 10:25:10,100 - INFO -   üïê Date: 2026-01-20T10:20:00+05:30
2026-01-20 10:25:10,100 - INFO -   üíπ Open: 190.55
2026-01-20 10:25:10,100 - INFO -   ‚¨ÜÔ∏è  High: 195.15
2026-01-20 10:25:10,100 - INFO -   ‚¨áÔ∏è  Low: 185.1
2026-01-20 10:25:10,100 - INFO -   üíµ Close: 190.75
2026-01-20 10:25:10,100 - INFO -   üì¶ Volume: 16050
2026-01-20 10:25:10,100 - INFO -   üìà RSI: 55.179311299638975
2026-01-20 10:25:10,100 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:25:10,100 - INFO - ‚úì Data fetch complete at 10:25:10
2026-01-20 10:25:10,100 - INFO - ================================================================================
2026-01-20 10:25:10,100 - INFO - ‚è∞ Current time: 10:25:10
2026-01-20 10:25:10,100 - INFO - ‚è∞ Next candle completes at: 10:30:00
2026-01-20 10:25:10,101 - INFO - ‚è∞ Will fetch at: 10:30:10 (+10s delay)
2026-01-20 10:25:10,101 - INFO - ‚è∞ Waiting 299 seconds...
2026-01-20 10:30:10,006 - INFO - üîÑ Starting data fetch at 10:30:10
2026-01-20 10:30:10,006 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:30:10,007 - INFO - Starting historical data fetch...
2026-01-20 10:30:10,007 - INFO - Instrument Token (int): 13300482
2026-01-20 10:30:10,008 - INFO - Fetching data from last 10 days (up to now)...
2026-01-20 10:30:10,008 - INFO - From: 2026-01-10 10:30:10
2026-01-20 10:30:10,008 - INFO - To: 2026-01-20 10:30:10
2026-01-20 10:30:10,008 - INFO - Interval: 5minute
2026-01-20 10:30:10,008 - INFO - Calling Kite API for historical data...
2026-01-20 10:30:10,126 - INFO - ‚úì Received 391 candles from API
2026-01-20 10:30:10,126 - INFO - ‚ÑπÔ∏è  Excluding current candle (still forming) - using 390 complete candles
2026-01-20 10:30:10,126 - INFO - Calculating RSI (14-period) on complete candles...
2026-01-20 10:30:10,130 - INFO - üìä Latest RSI: 56.39
2026-01-20 10:30:10,130 - INFO - üìä Filtered latest 14 candles
2026-01-20 10:30:10,130 - INFO - üìÖ Data range: 2026-01-20 09:20 to 2026-01-20 10:25
2026-01-20 10:30:10,130 - INFO - Processing candle data with RSI...
2026-01-20 10:30:10,130 - INFO - üîç Checking order conditions...
2026-01-20 10:30:10,130 - INFO - ‚ÑπÔ∏è  NO ALERT - No RSI crossover detected
2026-01-20 10:30:10,130 - INFO -    Previous RSI: 55.18 | Current RSI: 56.39
2026-01-20 10:30:10,130 - INFO -    RSI between 40-60 (neutral zone)
2026-01-20 10:30:10,130 - INFO - Saving 14 candles to candles_data.json...
2026-01-20 10:30:10,131 - INFO - ‚úì Successfully saved 14 candles to candles_data.json
2026-01-20 10:30:10,131 - INFO - File size: 2323 bytes
2026-01-20 10:30:10,131 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:30:10,131 - INFO - üìä LATEST CANDLE SUMMARY:
2026-01-20 10:30:10,131 - INFO -   üïê Date: 2026-01-20T10:25:00+05:30
2026-01-20 10:30:10,131 - INFO -   üíπ Open: 190.75
2026-01-20 10:30:10,131 - INFO -   ‚¨ÜÔ∏è  High: 198.35
2026-01-20 10:30:10,131 - INFO -   ‚¨áÔ∏è  Low: 188.2
2026-01-20 10:30:10,131 - INFO -   üíµ Close: 192.95
2026-01-20 10:30:10,131 - INFO -   üì¶ Volume: 12150
2026-01-20 10:30:10,131 - INFO -   üìà RSI: 56.39390895049342
2026-01-20 10:30:10,131 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:30:10,131 - INFO - ‚úì Data fetch complete at 10:30:10
2026-01-20 10:30:10,131 - INFO - ================================================================================
2026-01-20 10:30:10,132 - INFO - ‚è∞ Current time: 10:30:10
2026-01-20 10:30:10,132 - INFO - ‚è∞ Next candle completes at: 10:35:00
2026-01-20 10:30:10,132 - INFO - ‚è∞ Will fetch at: 10:35:10 (+10s delay)
2026-01-20 10:30:10,132 - INFO - ‚è∞ Waiting 299 seconds...
2026-01-20 10:35:10,006 - INFO - üîÑ Starting data fetch at 10:35:10
2026-01-20 10:35:10,006 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:35:10,007 - INFO - Starting historical data fetch...
2026-01-20 10:35:10,007 - INFO - Instrument Token (int): 13300482
2026-01-20 10:35:10,007 - INFO - Fetching data from last 10 days (up to now)...
2026-01-20 10:35:10,007 - INFO - From: 2026-01-10 10:35:10
2026-01-20 10:35:10,007 - INFO - To: 2026-01-20 10:35:10
2026-01-20 10:35:10,007 - INFO - Interval: 5minute
2026-01-20 10:35:10,007 - INFO - Calling Kite API for historical data...
2026-01-20 10:35:10,104 - INFO - ‚úì Received 392 candles from API
2026-01-20 10:35:10,105 - INFO - ‚ÑπÔ∏è  Excluding current candle (still forming) - using 391 complete candles
2026-01-20 10:35:10,105 - INFO - Calculating RSI (14-period) on complete candles...
2026-01-20 10:35:10,108 - INFO - üìä Latest RSI: 58.36
2026-01-20 10:35:10,108 - INFO - üìä Filtered latest 14 candles
2026-01-20 10:35:10,108 - INFO - üìÖ Data range: 2026-01-20 09:25 to 2026-01-20 10:30
2026-01-20 10:35:10,108 - INFO - Processing candle data with RSI...
2026-01-20 10:35:10,108 - INFO - üîç Checking order conditions...
2026-01-20 10:35:10,108 - INFO - ‚ÑπÔ∏è  NO ALERT - No RSI crossover detected
2026-01-20 10:35:10,108 - INFO -    Previous RSI: 56.39 | Current RSI: 58.36
2026-01-20 10:35:10,108 - INFO -    RSI between 40-60 (neutral zone)
2026-01-20 10:35:10,108 - INFO - Saving 14 candles to candles_data.json...
2026-01-20 10:35:10,110 - INFO - ‚úì Successfully saved 14 candles to candles_data.json
2026-01-20 10:35:10,110 - INFO - File size: 2322 bytes
2026-01-20 10:35:10,110 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:35:10,110 - INFO - üìä LATEST CANDLE SUMMARY:
2026-01-20 10:35:10,110 - INFO -   üïê Date: 2026-01-20T10:30:00+05:30
2026-01-20 10:35:10,110 - INFO -   üíπ Open: 192.95
2026-01-20 10:35:10,110 - INFO -   ‚¨ÜÔ∏è  High: 198.05
2026-01-20 10:35:10,110 - INFO -   ‚¨áÔ∏è  Low: 191.5
2026-01-20 10:35:10,110 - INFO -   üíµ Close: 196.5
2026-01-20 10:35:10,110 - INFO -   üì¶ Volume: 8730
2026-01-20 10:35:10,110 - INFO -   üìà RSI: 58.35504043359174
2026-01-20 10:35:10,110 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:35:10,111 - INFO - ‚úì Data fetch complete at 10:35:10
2026-01-20 10:35:10,111 - INFO - ================================================================================
2026-01-20 10:35:10,111 - INFO - ‚è∞ Current time: 10:35:10
2026-01-20 10:35:10,111 - INFO - ‚è∞ Next candle completes at: 10:40:00
2026-01-20 10:35:10,111 - INFO - ‚è∞ Will fetch at: 10:40:10 (+10s delay)
2026-01-20 10:35:10,111 - INFO - ‚è∞ Waiting 299 seconds...
2026-01-20 10:45:21,187 - INFO - üîÑ Starting data fetch at 10:45:21
2026-01-20 10:45:21,189 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:45:21,189 - INFO - Starting historical data fetch...
2026-01-20 10:45:21,189 - INFO - Instrument Token (int): 13300482
2026-01-20 10:45:21,189 - INFO - Fetching data from last 10 days (up to now)...
2026-01-20 10:45:21,189 - INFO - From: 2026-01-10 10:45:21
2026-01-20 10:45:21,189 - INFO - To: 2026-01-20 10:45:21
2026-01-20 10:45:21,189 - INFO - Interval: 5minute
2026-01-20 10:45:21,189 - INFO - Calling Kite API for historical data...
2026-01-20 10:45:21,214 - ERROR - ‚úó Error fetching historical data: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))
2026-01-20 10:45:21,215 - ERROR - Error type: ConnectionError
2026-01-20 10:45:21,228 - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connection.py", line 571, in getresponse
    httplib_response = super().getresponse()
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 1450, in getresponse
    response.begin()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 336, in begin
    version, status, reason = self._read_status()
                              ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 297, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/socket.py", line 725, in readinto
    return self._sock.recv_into(b)
           ~~~~~~~~~~~~~~~~~~~~^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/ssl.py", line 1304, in recv_into
    return self.read(nbytes, buffer)
           ~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/ssl.py", line 1138, in read
    return self._sslobj.read(len, buffer)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
ConnectionResetError: [Errno 54] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/requests/adapters.py", line 644, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/util/retry.py", line 490, in increment
    raise reraise(type(error), error, _stacktrace)
          ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/util/util.py", line 38, in reraise
    raise value.with_traceback(tb)
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connection.py", line 571, in getresponse
    httplib_response = super().getresponse()
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 1450, in getresponse
    response.begin()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 336, in begin
    version, status, reason = self._read_status()
                              ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 297, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/socket.py", line 725, in readinto
    return self._sock.recv_into(b)
           ~~~~~~~~~~~~~~~~~~~~^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/ssl.py", line 1304, in recv_into
    return self.read(nbytes, buffer)
           ~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/ssl.py", line 1138, in read
    return self._sslobj.read(len, buffer)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
urllib3.exceptions.ProtocolError: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ganeshghatti/Documents/Auto-trading/websocket_server.py", line 1219, in fetch_historical_data
    historical_data = self.kite.historical_data(
        instrument_token=instrument_token,
    ...<2 lines>...
        interval="5minute"
    )
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/kiteconnect/connect.py", line 632, in historical_data
    data = self._get("market.historical",
                     url_args={"instrument_token": instrument_token, "interval": interval},
    ...<5 lines>...
                         "oi": 1 if oi else 0
                     })
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/kiteconnect/connect.py", line 861, in _get
    return self._request(route, "GET", url_args=url_args, params=params, is_json=is_json)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/kiteconnect/connect.py", line 916, in _request
    raise e
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/kiteconnect/connect.py", line 904, in _request
    r = self.reqsession.request(method,
                                url,
    ...<6 lines>...
                                timeout=self.timeout,
                                proxies=self.proxies)
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/requests/adapters.py", line 659, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))

2026-01-20 10:45:21,229 - WARNING - ‚ö† Data fetch failed. Connection might be lost.
2026-01-20 10:45:21,229 - WARNING - ‚ö† Not connected. Retrying in 300 seconds...
2026-01-20 10:50:21,235 - INFO - Attempting to connect to Kite API...
2026-01-20 10:50:21,236 - INFO - Reading access token from file: access_token.txt
2026-01-20 10:50:21,237 - INFO - Access token loaded: JMrhfgQBfb...
2026-01-20 10:50:21,237 - INFO - Initializing KiteConnect instance
2026-01-20 10:50:21,238 - INFO - Setting access token
2026-01-20 10:50:21,238 - INFO - Fetching PE instrument...
2026-01-20 10:50:21,238 - INFO - Fetching option instrument: BANKNIFTY26JAN59300PE...
2026-01-20 10:50:22,087 - INFO - ‚úì Selected Option: BANKNIFTY26JAN59300PE
2026-01-20 10:50:22,087 - INFO -   Instrument Token: 13300482
2026-01-20 10:50:22,087 - INFO -   Strike: 59300.0
2026-01-20 10:50:22,088 - INFO -   Expiry: 2026-01-27
2026-01-20 10:50:22,088 - INFO -   Lot Size: 30 units per lot
2026-01-20 10:50:22,088 - INFO -   Trading: 2 lot(s) = 60 units
2026-01-20 10:50:22,092 - INFO - üîå Setting up WebSocket connection...
2026-01-20 10:50:23,382 - INFO - ‚úì WebSocket connected successfully
2026-01-20 10:50:23,383 - INFO - üì° Subscribed to BANKNIFTY26JAN59300PE (13300482)
2026-01-20 10:50:23,383 - INFO - üìä WebSocket Mode: FULL (real-time OHLC + LTP for entry triggers)
2026-01-20 10:50:24,098 - INFO - ‚úì WebSocket setup complete
2026-01-20 10:50:24,098 - INFO - ‚úì Kite API connection established successfully
2026-01-20 10:50:24,098 - INFO - ‚è∞ Current time: 10:50:24
2026-01-20 10:50:24,099 - INFO - ‚è∞ Next candle completes at: 10:55:00
2026-01-20 10:50:24,099 - INFO - ‚è∞ Will fetch at: 10:55:10 (+10s delay)
2026-01-20 10:50:24,099 - INFO - ‚è∞ Waiting 285 seconds...
2026-01-20 10:50:24,099 - INFO - ‚è≥ Reconnected! Waiting for next 5-minute interval before fetching...
2026-01-20 10:55:10,007 - INFO - üîÑ Starting data fetch at 10:55:10
2026-01-20 10:55:10,008 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:55:10,008 - INFO - Starting historical data fetch...
2026-01-20 10:55:10,008 - INFO - Instrument Token (int): 13300482
2026-01-20 10:55:10,008 - INFO - Fetching data from last 10 days (up to now)...
2026-01-20 10:55:10,008 - INFO - From: 2026-01-10 10:55:10
2026-01-20 10:55:10,008 - INFO - To: 2026-01-20 10:55:10
2026-01-20 10:55:10,008 - INFO - Interval: 5minute
2026-01-20 10:55:10,008 - INFO - Calling Kite API for historical data...
2026-01-20 10:55:10,094 - INFO - ‚úì Received 396 candles from API
2026-01-20 10:55:10,094 - INFO - ‚ÑπÔ∏è  Excluding current candle (still forming) - using 395 complete candles
2026-01-20 10:55:10,094 - INFO - Calculating RSI (14-period) on complete candles...
2026-01-20 10:55:10,099 - INFO - üìä Latest RSI: 54.28
2026-01-20 10:55:10,099 - INFO - üìä Filtered latest 14 candles
2026-01-20 10:55:10,099 - INFO - üìÖ Data range: 2026-01-20 09:45 to 2026-01-20 10:50
2026-01-20 10:55:10,099 - INFO - Processing candle data with RSI...
2026-01-20 10:55:10,099 - INFO - üîç Checking order conditions...
2026-01-20 10:55:10,099 - INFO - ‚ÑπÔ∏è  NO ALERT - No RSI crossover detected
2026-01-20 10:55:10,099 - INFO -    Previous RSI: 58.36 | Current RSI: 54.28
2026-01-20 10:55:10,099 - INFO -    RSI between 40-60 (neutral zone)
2026-01-20 10:55:10,099 - INFO - Saving 14 candles to candles_data.json...
2026-01-20 10:55:10,099 - INFO - ‚úì Successfully saved 14 candles to candles_data.json
2026-01-20 10:55:10,100 - INFO - File size: 2318 bytes
2026-01-20 10:55:10,100 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:55:10,100 - INFO - üìä LATEST CANDLE SUMMARY:
2026-01-20 10:55:10,100 - INFO -   üïê Date: 2026-01-20T10:50:00+05:30
2026-01-20 10:55:10,100 - INFO -   üíπ Open: 186.9
2026-01-20 10:55:10,100 - INFO -   ‚¨ÜÔ∏è  High: 193.75
2026-01-20 10:55:10,100 - INFO -   ‚¨áÔ∏è  Low: 186.4
2026-01-20 10:55:10,100 - INFO -   üíµ Close: 191.6
2026-01-20 10:55:10,100 - INFO -   üì¶ Volume: 3750
2026-01-20 10:55:10,100 - INFO -   üìà RSI: 54.27721737192521
2026-01-20 10:55:10,100 - INFO - --------------------------------------------------------------------------------
2026-01-20 10:55:10,100 - INFO - ‚úì Data fetch complete at 10:55:10
2026-01-20 10:55:10,100 - INFO - ================================================================================
2026-01-20 10:55:10,100 - INFO - ‚è∞ Current time: 10:55:10
2026-01-20 10:55:10,100 - INFO - ‚è∞ Next candle completes at: 11:00:00
2026-01-20 10:55:10,100 - INFO - ‚è∞ Will fetch at: 11:00:10 (+10s delay)
2026-01-20 10:55:10,100 - INFO - ‚è∞ Waiting 299 seconds...
2026-01-20 11:00:10,006 - INFO - üîÑ Starting data fetch at 11:00:10
2026-01-20 11:00:10,007 - INFO - --------------------------------------------------------------------------------
2026-01-20 11:00:10,008 - INFO - Starting historical data fetch...
2026-01-20 11:00:10,008 - INFO - Instrument Token (int): 13300482
2026-01-20 11:00:10,008 - INFO - Fetching data from last 10 days (up to now)...
2026-01-20 11:00:10,008 - INFO - From: 2026-01-10 11:00:10
2026-01-20 11:00:10,008 - INFO - To: 2026-01-20 11:00:10
2026-01-20 11:00:10,008 - INFO - Interval: 5minute
2026-01-20 11:00:10,008 - INFO - Calling Kite API for historical data...
2026-01-20 11:00:10,097 - INFO - ‚úì Received 397 candles from API
2026-01-20 11:00:10,097 - INFO - ‚ÑπÔ∏è  Excluding current candle (still forming) - using 396 complete candles
2026-01-20 11:00:10,097 - INFO - Calculating RSI (14-period) on complete candles...
2026-01-20 11:00:10,100 - INFO - üìä Latest RSI: 57.38
2026-01-20 11:00:10,100 - INFO - üìä Filtered latest 14 candles
2026-01-20 11:00:10,100 - INFO - üìÖ Data range: 2026-01-20 09:50 to 2026-01-20 10:55
2026-01-20 11:00:10,100 - INFO - Processing candle data with RSI...
2026-01-20 11:00:10,100 - INFO - üîç Checking order conditions...
2026-01-20 11:00:10,100 - INFO - ‚ÑπÔ∏è  NO ALERT - No RSI crossover detected
2026-01-20 11:00:10,100 - INFO -    Previous RSI: 54.28 | Current RSI: 57.38
2026-01-20 11:00:10,100 - INFO -    RSI between 40-60 (neutral zone)
2026-01-20 11:00:10,100 - INFO - Saving 14 candles to candles_data.json...
2026-01-20 11:00:10,101 - INFO - ‚úì Successfully saved 14 candles to candles_data.json
2026-01-20 11:00:10,101 - INFO - File size: 2320 bytes
2026-01-20 11:00:10,101 - INFO - --------------------------------------------------------------------------------
2026-01-20 11:00:10,101 - INFO - üìä LATEST CANDLE SUMMARY:
2026-01-20 11:00:10,101 - INFO -   üïê Date: 2026-01-20T10:55:00+05:30
2026-01-20 11:00:10,101 - INFO -   üíπ Open: 191.6
2026-01-20 11:00:10,101 - INFO -   ‚¨ÜÔ∏è  High: 203
2026-01-20 11:00:10,101 - INFO -   ‚¨áÔ∏è  Low: 190.95
2026-01-20 11:00:10,101 - INFO -   üíµ Close: 196.75
2026-01-20 11:00:10,101 - INFO -   üì¶ Volume: 21480
2026-01-20 11:00:10,101 - INFO -   üìà RSI: 57.37876304328646
2026-01-20 11:00:10,101 - INFO - --------------------------------------------------------------------------------
2026-01-20 11:00:10,101 - INFO - ‚úì Data fetch complete at 11:00:10
2026-01-20 11:00:10,101 - INFO - ================================================================================
2026-01-20 11:00:10,101 - INFO - ‚è∞ Current time: 11:00:10
2026-01-20 11:00:10,101 - INFO - ‚è∞ Next candle completes at: 11:05:00
2026-01-20 11:00:10,101 - INFO - ‚è∞ Will fetch at: 11:05:10 (+10s delay)
2026-01-20 11:00:10,101 - INFO - ‚è∞ Waiting 299 seconds...
2026-01-20 11:12:56,181 - INFO - üîÑ Starting data fetch at 11:12:56
2026-01-20 11:12:56,183 - INFO - --------------------------------------------------------------------------------
2026-01-20 11:12:56,183 - INFO - Starting historical data fetch...
2026-01-20 11:12:56,183 - INFO - Instrument Token (int): 13300482
2026-01-20 11:12:56,183 - INFO - Fetching data from last 10 days (up to now)...
2026-01-20 11:12:56,183 - INFO - From: 2026-01-10 11:12:56
2026-01-20 11:12:56,183 - INFO - To: 2026-01-20 11:12:56
2026-01-20 11:12:56,183 - INFO - Interval: 5minute
2026-01-20 11:12:56,183 - INFO - Calling Kite API for historical data...
2026-01-20 11:12:56,204 - ERROR - ‚úó Error fetching historical data: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))
2026-01-20 11:12:56,204 - ERROR - Error type: ConnectionError
2026-01-20 11:12:56,209 - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connection.py", line 571, in getresponse
    httplib_response = super().getresponse()
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 1450, in getresponse
    response.begin()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 336, in begin
    version, status, reason = self._read_status()
                              ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 297, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/socket.py", line 725, in readinto
    return self._sock.recv_into(b)
           ~~~~~~~~~~~~~~~~~~~~^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/ssl.py", line 1304, in recv_into
    return self.read(nbytes, buffer)
           ~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/ssl.py", line 1138, in read
    return self._sslobj.read(len, buffer)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
ConnectionResetError: [Errno 54] Connection reset by peer

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/requests/adapters.py", line 644, in send
    resp = conn.urlopen(
        method=request.method,
    ...<9 lines>...
        chunked=chunked,
    )
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 841, in urlopen
    retries = retries.increment(
        method, url, error=new_e, _pool=self, _stacktrace=sys.exc_info()[2]
    )
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/util/retry.py", line 490, in increment
    raise reraise(type(error), error, _stacktrace)
          ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/util/util.py", line 38, in reraise
    raise value.with_traceback(tb)
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 787, in urlopen
    response = self._make_request(
        conn,
    ...<10 lines>...
        **response_kw,
    )
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connectionpool.py", line 534, in _make_request
    response = conn.getresponse()
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/urllib3/connection.py", line 571, in getresponse
    httplib_response = super().getresponse()
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 1450, in getresponse
    response.begin()
    ~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 336, in begin
    version, status, reason = self._read_status()
                              ~~~~~~~~~~~~~~~~~^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/http/client.py", line 297, in _read_status
    line = str(self.fp.readline(_MAXLINE + 1), "iso-8859-1")
               ~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/socket.py", line 725, in readinto
    return self._sock.recv_into(b)
           ~~~~~~~~~~~~~~~~~~~~^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/ssl.py", line 1304, in recv_into
    return self.read(nbytes, buffer)
           ~~~~~~~~~^^^^^^^^^^^^^^^^
  File "/opt/homebrew/Cellar/python@3.14/3.14.2/Frameworks/Python.framework/Versions/3.14/lib/python3.14/ssl.py", line 1138, in read
    return self._sslobj.read(len, buffer)
           ~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^
urllib3.exceptions.ProtocolError: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/ganeshghatti/Documents/Auto-trading/websocket_server.py", line 1219, in fetch_historical_data
    historical_data = self.kite.historical_data(
        instrument_token=instrument_token,
    ...<2 lines>...
        interval="5minute"
    )
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/kiteconnect/connect.py", line 632, in historical_data
    data = self._get("market.historical",
                     url_args={"instrument_token": instrument_token, "interval": interval},
    ...<5 lines>...
                         "oi": 1 if oi else 0
                     })
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/kiteconnect/connect.py", line 861, in _get
    return self._request(route, "GET", url_args=url_args, params=params, is_json=is_json)
           ~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/kiteconnect/connect.py", line 916, in _request
    raise e
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/kiteconnect/connect.py", line 904, in _request
    r = self.reqsession.request(method,
                                url,
    ...<6 lines>...
                                timeout=self.timeout,
                                proxies=self.proxies)
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/requests/sessions.py", line 589, in request
    resp = self.send(prep, **send_kwargs)
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/requests/sessions.py", line 703, in send
    r = adapter.send(request, **kwargs)
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/requests/adapters.py", line 659, in send
    raise ConnectionError(err, request=request)
requests.exceptions.ConnectionError: ('Connection aborted.', ConnectionResetError(54, 'Connection reset by peer'))

2026-01-20 11:12:56,210 - WARNING - ‚ö† Data fetch failed. Connection might be lost.
2026-01-20 11:12:56,210 - WARNING - ‚ö† Not connected. Retrying in 300 seconds...
2026-01-20 11:17:56,217 - INFO - Attempting to connect to Kite API...
2026-01-20 11:17:56,218 - INFO - Reading access token from file: access_token.txt
2026-01-20 11:17:56,219 - INFO - Access token loaded: JMrhfgQBfb...
2026-01-20 11:17:56,219 - INFO - Initializing KiteConnect instance
2026-01-20 11:17:56,219 - INFO - Setting access token
2026-01-20 11:17:56,219 - INFO - Fetching PE instrument...
2026-01-20 11:17:56,219 - INFO - Fetching option instrument: BANKNIFTY26JAN59300PE...
2026-01-20 11:17:56,841 - INFO - ‚úì Selected Option: BANKNIFTY26JAN59300PE
2026-01-20 11:17:56,841 - INFO -   Instrument Token: 13300482
2026-01-20 11:17:56,841 - INFO -   Strike: 59300.0
2026-01-20 11:17:56,841 - INFO -   Expiry: 2026-01-27
2026-01-20 11:17:56,841 - INFO -   Lot Size: 30 units per lot
2026-01-20 11:17:56,841 - INFO -   Trading: 2 lot(s) = 60 units
2026-01-20 11:17:56,845 - INFO - üîå Setting up WebSocket connection...
2026-01-20 11:17:57,715 - INFO - ‚úì WebSocket connected successfully
2026-01-20 11:17:57,716 - INFO - üì° Subscribed to BANKNIFTY26JAN59300PE (13300482)
2026-01-20 11:17:57,716 - INFO - üìä WebSocket Mode: FULL (real-time OHLC + LTP for entry triggers)
2026-01-20 11:17:58,850 - INFO - ‚úì WebSocket setup complete
2026-01-20 11:17:58,850 - INFO - ‚úì Kite API connection established successfully
2026-01-20 11:17:58,851 - INFO - ‚è∞ Current time: 11:17:58
2026-01-20 11:17:58,851 - INFO - ‚è∞ Next candle completes at: 11:20:00
2026-01-20 11:17:58,851 - INFO - ‚è∞ Will fetch at: 11:20:10 (+10s delay)
2026-01-20 11:17:58,851 - INFO - ‚è∞ Waiting 131 seconds...
2026-01-20 11:17:58,851 - INFO - ‚è≥ Reconnected! Waiting for next 5-minute interval before fetching...
2026-01-20 11:20:10,006 - INFO - üîÑ Starting data fetch at 11:20:10
2026-01-20 11:20:10,006 - INFO - --------------------------------------------------------------------------------
2026-01-20 11:20:10,006 - INFO - Starting historical data fetch...
2026-01-20 11:20:10,006 - INFO - Instrument Token (int): 13300482
2026-01-20 11:20:10,006 - INFO - Fetching data from last 10 days (up to now)...
2026-01-20 11:20:10,006 - INFO - From: 2026-01-10 11:20:10
2026-01-20 11:20:10,007 - INFO - To: 2026-01-20 11:20:10
2026-01-20 11:20:10,007 - INFO - Interval: 5minute
2026-01-20 11:20:10,007 - INFO - Calling Kite API for historical data...
2026-01-20 11:20:10,107 - INFO - ‚úì Received 401 candles from API
2026-01-20 11:20:10,107 - INFO - ‚ÑπÔ∏è  Excluding current candle (still forming) - using 400 complete candles
2026-01-20 11:20:10,107 - INFO - Calculating RSI (14-period) on complete candles...
2026-01-20 11:20:10,110 - INFO - üìä Latest RSI: 52.68
2026-01-20 11:20:10,110 - INFO - üìä Filtered latest 14 candles
2026-01-20 11:20:10,110 - INFO - üìÖ Data range: 2026-01-20 10:10 to 2026-01-20 11:15
2026-01-20 11:20:10,110 - INFO - Processing candle data with RSI...
2026-01-20 11:20:10,111 - INFO - üîç Checking order conditions...
2026-01-20 11:20:10,111 - INFO - ‚ÑπÔ∏è  NO ALERT - No RSI crossover detected
2026-01-20 11:20:10,111 - INFO -    Previous RSI: 57.38 | Current RSI: 52.68
2026-01-20 11:20:10,111 - INFO -    RSI between 40-60 (neutral zone)
2026-01-20 11:20:10,111 - INFO - Saving 14 candles to candles_data.json...
2026-01-20 11:20:10,111 - INFO - ‚úì Successfully saved 14 candles to candles_data.json
2026-01-20 11:20:10,111 - INFO - File size: 2303 bytes
2026-01-20 11:20:10,111 - INFO - --------------------------------------------------------------------------------
2026-01-20 11:20:10,111 - INFO - üìä LATEST CANDLE SUMMARY:
2026-01-20 11:20:10,111 - INFO -   üïê Date: 2026-01-20T11:15:00+05:30
2026-01-20 11:20:10,111 - INFO -   üíπ Open: 188
2026-01-20 11:20:10,111 - INFO -   ‚¨ÜÔ∏è  High: 192.15
2026-01-20 11:20:10,111 - INFO -   ‚¨áÔ∏è  Low: 180.55
2026-01-20 11:20:10,112 - INFO -   üíµ Close: 191.8
2026-01-20 11:20:10,112 - INFO -   üì¶ Volume: 7890
2026-01-20 11:20:10,112 - INFO -   üìà RSI: 52.68042585974011
2026-01-20 11:20:10,112 - INFO - --------------------------------------------------------------------------------
2026-01-20 11:20:10,112 - INFO - ‚úì Data fetch complete at 11:20:10
2026-01-20 11:20:10,112 - INFO - ================================================================================
2026-01-20 11:20:10,112 - INFO - ‚è∞ Current time: 11:20:10
2026-01-20 11:20:10,112 - INFO - ‚è∞ Next candle completes at: 11:25:00
2026-01-20 11:20:10,112 - INFO - ‚è∞ Will fetch at: 11:25:10 (+10s delay)
2026-01-20 11:20:10,112 - INFO - ‚è∞ Waiting 299 seconds...
2026-01-20 23:35:21,441 - INFO - ================================================================================
2026-01-20 23:35:21,441 - INFO - Initializing Kite Data Fetcher Server
2026-01-20 23:35:21,441 - INFO - ================================================================================
2026-01-20 23:35:21,441 - INFO - Loading environment variables from .env file
2026-01-20 23:35:21,442 - INFO - API_KEY loaded: lo8381a8...
2026-01-20 23:35:21,442 - INFO - üìã Loading configuration from config.json...
2026-01-20 23:35:21,442 - INFO - ‚úì Configuration loaded successfully
2026-01-20 23:35:21,442 - INFO -   üìà Instrument: CRUDEOIL
2026-01-20 23:35:21,442 - INFO -   üè¢ Exchange: NFO
2026-01-20 23:35:21,442 - INFO -   üìä Type: FUT
2026-01-20 23:35:21,442 - INFO -   üìè High-Low Diff: 15.0
2026-01-20 23:35:21,442 - INFO -   üéØ Target: 10.0
2026-01-20 23:35:21,442 - INFO -   üì¶ Lots: 2
2026-01-20 23:35:21,442 - INFO -   üì¶ Lot Size: 100
2026-01-20 23:35:21,442 - INFO -   üì¶ Total Quantity: 200
2026-01-20 23:35:21,442 - INFO -   üíº Trading Mode: PAPER
2026-01-20 23:35:21,442 - INFO - üìä Trading Mode: PAPER
2026-01-20 23:35:21,442 - INFO - üì¶ Trade Quantity: 2 lot(s)
2026-01-20 23:35:21,442 - INFO - üîÑ Retry Interval: 300 seconds
2026-01-20 23:35:21,442 - INFO - ‚è±Ô∏è  Fetch Interval: 300 seconds (5-min aligned + 10s delay)
2026-01-20 23:35:21,442 - INFO - üìÅ Candles Data File: candles_data.json
2026-01-20 23:35:21,442 - INFO - üìÅ Trades Log File: trades.json
2026-01-20 23:35:21,442 - INFO - üìß Email Notifications: Enabled
2026-01-20 23:35:21,442 - INFO - ================================================================================
2026-01-20 23:35:21,442 - INFO - ================================================================================
2026-01-20 23:35:21,442 - INFO - STARTING KITE DATA FETCHER & TRADING SERVER
2026-01-20 23:35:21,442 - INFO - ================================================================================
2026-01-20 23:35:21,442 - INFO - Attempting to connect to Kite API...
2026-01-20 23:35:21,442 - INFO - Reading access token from file: access_token.txt
2026-01-20 23:35:21,442 - INFO - Access token loaded: JMrhfgQBfb...
2026-01-20 23:35:21,442 - INFO - Initializing KiteConnect instance
2026-01-20 23:35:21,442 - INFO - Setting access token
2026-01-20 23:35:21,442 - INFO - Fetching FUT instrument...
2026-01-20 23:35:21,442 - INFO - Fetching CRUDEOIL futures instruments...
2026-01-20 23:35:22,116 - ERROR - ‚úó No CRUDEOIL futures found
2026-01-20 23:35:22,120 - ERROR - ‚úó Failed to fetch CRUDEOIL futures instrument
2026-01-20 23:35:22,121 - WARNING - ‚ö† Not connected. Retrying in 300 seconds...
2026-01-20 23:36:02,030 - INFO - 
================================================================================
2026-01-20 23:36:02,031 - INFO - Server stopped by user (Ctrl+C)
2026-01-20 23:36:02,031 - INFO - ================================================================================
2026-01-20 23:36:03,542 - INFO - ================================================================================
2026-01-20 23:36:03,542 - INFO - Initializing Kite Data Fetcher Server
2026-01-20 23:36:03,542 - INFO - ================================================================================
2026-01-20 23:36:03,542 - INFO - Loading environment variables from .env file
2026-01-20 23:36:03,543 - INFO - API_KEY loaded: lo8381a8...
2026-01-20 23:36:03,543 - INFO - üìã Loading configuration from config.json...
2026-01-20 23:36:03,543 - INFO - ‚úì Configuration loaded successfully
2026-01-20 23:36:03,543 - INFO -   üìà Instrument: CRUDEOIL
2026-01-20 23:36:03,543 - INFO -   üè¢ Exchange: NFO
2026-01-20 23:36:03,543 - INFO -   üìä Type: FUT
2026-01-20 23:36:03,543 - INFO -   üìè High-Low Diff: 15.0
2026-01-20 23:36:03,543 - INFO -   üéØ Target: 10.0
2026-01-20 23:36:03,543 - INFO -   üì¶ Lots: 2
2026-01-20 23:36:03,543 - INFO -   üì¶ Lot Size: 100
2026-01-20 23:36:03,543 - INFO -   üì¶ Total Quantity: 200
2026-01-20 23:36:03,543 - INFO -   üíº Trading Mode: PAPER
2026-01-20 23:36:03,543 - INFO - üìä Trading Mode: PAPER
2026-01-20 23:36:03,543 - INFO - üì¶ Trade Quantity: 2 lot(s)
2026-01-20 23:36:03,543 - INFO - üîÑ Retry Interval: 300 seconds
2026-01-20 23:36:03,543 - INFO - ‚è±Ô∏è  Fetch Interval: 300 seconds (5-min aligned + 10s delay)
2026-01-20 23:36:03,543 - INFO - üìÅ Candles Data File: candles_data.json
2026-01-20 23:36:03,543 - INFO - üìÅ Trades Log File: trades.json
2026-01-20 23:36:03,543 - INFO - üìß Email Notifications: Enabled
2026-01-20 23:36:03,543 - INFO - ================================================================================
2026-01-20 23:36:03,543 - INFO - ================================================================================
2026-01-20 23:36:03,543 - INFO - STARTING KITE DATA FETCHER & TRADING SERVER
2026-01-20 23:36:03,543 - INFO - ================================================================================
2026-01-20 23:36:03,543 - INFO - Attempting to connect to Kite API...
2026-01-20 23:36:03,543 - INFO - Reading access token from file: access_token.txt
2026-01-20 23:36:03,543 - INFO - Access token loaded: JMrhfgQBfb...
2026-01-20 23:36:03,543 - INFO - Initializing KiteConnect instance
2026-01-20 23:36:03,543 - INFO - Setting access token
2026-01-20 23:36:03,543 - INFO - Fetching FUT instrument...
2026-01-20 23:36:03,543 - INFO - Fetching CRUDEOIL futures instruments...
2026-01-20 23:36:04,197 - ERROR - ‚úó No CRUDEOIL futures found
2026-01-20 23:36:04,201 - ERROR - ‚úó Failed to fetch CRUDEOIL futures instrument
2026-01-20 23:36:04,201 - WARNING - ‚ö† Not connected. Retrying in 300 seconds...
2026-01-20 23:37:29,155 - INFO - 
================================================================================
2026-01-20 23:37:29,155 - INFO - Server stopped by user (Ctrl+C)
2026-01-20 23:37:29,155 - INFO - ================================================================================
2026-01-20 23:37:30,828 - INFO - ================================================================================
2026-01-20 23:37:30,828 - INFO - Initializing Kite Data Fetcher Server
2026-01-20 23:37:30,828 - INFO - ================================================================================
2026-01-20 23:37:30,828 - INFO - Loading environment variables from .env file
2026-01-20 23:37:30,828 - INFO - API_KEY loaded: lo8381a8...
2026-01-20 23:37:30,829 - INFO - üìã Loading configuration from config.json...
2026-01-20 23:37:30,829 - INFO - ‚úì Configuration loaded successfully
2026-01-20 23:37:30,829 - INFO -   üìà Instrument: CRUDEOIL
2026-01-20 23:37:30,829 - INFO -   üè¢ Exchange: MCX
2026-01-20 23:37:30,829 - INFO -   üìä Type: FUT
2026-01-20 23:37:30,829 - INFO -   üìè High-Low Diff: 15.0
2026-01-20 23:37:30,829 - INFO -   üéØ Target: 10.0
2026-01-20 23:37:30,829 - INFO -   üì¶ Lots: 2
2026-01-20 23:37:30,829 - INFO -   üì¶ Lot Size: 100
2026-01-20 23:37:30,829 - INFO -   üì¶ Total Quantity: 200
2026-01-20 23:37:30,829 - INFO -   üíº Trading Mode: PAPER
2026-01-20 23:37:30,829 - INFO - üìä Trading Mode: PAPER
2026-01-20 23:37:30,829 - INFO - üì¶ Trade Quantity: 2 lot(s)
2026-01-20 23:37:30,829 - INFO - üîÑ Retry Interval: 300 seconds
2026-01-20 23:37:30,829 - INFO - ‚è±Ô∏è  Fetch Interval: 300 seconds (5-min aligned + 10s delay)
2026-01-20 23:37:30,829 - INFO - üìÅ Candles Data File: candles_data.json
2026-01-20 23:37:30,829 - INFO - üìÅ Trades Log File: trades.json
2026-01-20 23:37:30,829 - INFO - üìß Email Notifications: Enabled
2026-01-20 23:37:30,829 - INFO - ================================================================================
2026-01-20 23:37:30,829 - INFO - ================================================================================
2026-01-20 23:37:30,829 - INFO - STARTING KITE DATA FETCHER & TRADING SERVER
2026-01-20 23:37:30,829 - INFO - ================================================================================
2026-01-20 23:37:30,829 - INFO - Attempting to connect to Kite API...
2026-01-20 23:37:30,829 - INFO - Reading access token from file: access_token.txt
2026-01-20 23:37:30,829 - INFO - Access token loaded: JMrhfgQBfb...
2026-01-20 23:37:30,829 - INFO - Initializing KiteConnect instance
2026-01-20 23:37:30,829 - INFO - Setting access token
2026-01-20 23:37:30,829 - INFO - Fetching FUT instrument...
2026-01-20 23:37:30,829 - INFO - Fetching CRUDEOIL futures instruments...
2026-01-20 23:37:31,500 - ERROR - ‚úó No CRUDEOIL futures found
2026-01-20 23:37:31,504 - ERROR - ‚úó Failed to fetch CRUDEOIL futures instrument
2026-01-20 23:37:31,505 - WARNING - ‚ö† Not connected. Retrying in 300 seconds...
2026-01-20 23:38:11,984 - INFO - 
================================================================================
2026-01-20 23:38:11,984 - INFO - Server stopped by user (Ctrl+C)
2026-01-20 23:38:11,985 - INFO - ================================================================================
2026-01-20 23:38:16,077 - INFO - ================================================================================
2026-01-20 23:38:16,077 - INFO - Initializing Kite Data Fetcher Server
2026-01-20 23:38:16,077 - INFO - ================================================================================
2026-01-20 23:38:16,077 - INFO - Loading environment variables from .env file
2026-01-20 23:38:16,077 - INFO - API_KEY loaded: lo8381a8...
2026-01-20 23:38:16,077 - INFO - üìã Loading configuration from config.json...
2026-01-20 23:38:16,077 - INFO - ‚úì Configuration loaded successfully
2026-01-20 23:38:16,077 - INFO -   üìà Instrument: CRUDEOIL
2026-01-20 23:38:16,077 - INFO -   üè¢ Exchange: MCX
2026-01-20 23:38:16,077 - INFO -   üìä Type: FUT
2026-01-20 23:38:16,077 - INFO -   üìè High-Low Diff: 15.0
2026-01-20 23:38:16,077 - INFO -   üéØ Target: 10.0
2026-01-20 23:38:16,077 - INFO -   üì¶ Lots: 2
2026-01-20 23:38:16,077 - INFO -   üì¶ Lot Size: 100
2026-01-20 23:38:16,077 - INFO -   üì¶ Total Quantity: 200
2026-01-20 23:38:16,077 - INFO -   üíº Trading Mode: PAPER
2026-01-20 23:38:16,077 - INFO - üìä Trading Mode: PAPER
2026-01-20 23:38:16,077 - INFO - üì¶ Trade Quantity: 2 lot(s)
2026-01-20 23:38:16,077 - INFO - üîÑ Retry Interval: 300 seconds
2026-01-20 23:38:16,077 - INFO - ‚è±Ô∏è  Fetch Interval: 300 seconds (5-min aligned + 10s delay)
2026-01-20 23:38:16,077 - INFO - üìÅ Candles Data File: candles_data.json
2026-01-20 23:38:16,077 - INFO - üìÅ Trades Log File: trades.json
2026-01-20 23:38:16,077 - INFO - üìß Email Notifications: Enabled
2026-01-20 23:38:16,077 - INFO - ================================================================================
2026-01-20 23:38:16,077 - INFO - ================================================================================
2026-01-20 23:38:16,077 - INFO - STARTING KITE DATA FETCHER & TRADING SERVER
2026-01-20 23:38:16,077 - INFO - ================================================================================
2026-01-20 23:38:16,077 - INFO - Attempting to connect to Kite API...
2026-01-20 23:38:16,077 - INFO - Reading access token from file: access_token.txt
2026-01-20 23:38:16,077 - INFO - Access token loaded: JMrhfgQBfb...
2026-01-20 23:38:16,077 - INFO - Initializing KiteConnect instance
2026-01-20 23:38:16,077 - INFO - Setting access token
2026-01-20 23:38:16,077 - INFO - Fetching FUT instrument...
2026-01-20 23:38:16,077 - INFO - Fetching CRUDEOIL futures instruments...
2026-01-20 23:38:16,740 - ERROR - ‚úó No CRUDEOIL futures found
2026-01-20 23:38:16,744 - ERROR - ‚úó Failed to fetch CRUDEOIL futures instrument
2026-01-20 23:38:16,744 - WARNING - ‚ö† Not connected. Retrying in 300 seconds...
2026-01-20 23:42:04,454 - INFO - 
================================================================================
2026-01-20 23:42:04,455 - INFO - Server stopped by user (Ctrl+C)
2026-01-20 23:42:04,455 - INFO - ================================================================================
2026-01-20 23:44:41,116 - INFO - ================================================================================
2026-01-20 23:44:41,117 - INFO - Initializing Kite Data Fetcher Server
2026-01-20 23:44:41,117 - INFO - ================================================================================
2026-01-20 23:44:41,117 - INFO - Loading environment variables from .env file
2026-01-20 23:44:41,117 - INFO - API_KEY loaded: lo8381a8...
2026-01-20 23:44:41,117 - INFO - üìã Loading configuration from config.json...
2026-01-20 23:44:41,117 - INFO - ‚úì Configuration loaded successfully
2026-01-20 23:44:41,117 - INFO -   üìà Instrument: CRUDEOIL
2026-01-20 23:44:41,117 - INFO -   üè¢ Exchange: MCX
2026-01-20 23:44:41,117 - INFO -   üìä Type: FUT
2026-01-20 23:44:41,117 - INFO -   üìè High-Low Diff: 15.0
2026-01-20 23:44:41,117 - INFO -   üéØ Target: 10.0
2026-01-20 23:44:41,117 - INFO -   üì¶ Lots: 2
2026-01-20 23:44:41,117 - INFO -   üì¶ Lot Size: 100
2026-01-20 23:44:41,117 - INFO -   üì¶ Total Quantity: 200
2026-01-20 23:44:41,117 - INFO -   üíº Trading Mode: PAPER
2026-01-20 23:44:41,117 - INFO - üìä Trading Mode: PAPER
2026-01-20 23:44:41,117 - INFO - üì¶ Trade Quantity: 2 lot(s)
2026-01-20 23:44:41,117 - INFO - üîÑ Retry Interval: 300 seconds
2026-01-20 23:44:41,117 - INFO - ‚è±Ô∏è  Fetch Interval: 300 seconds (5-min aligned + 10s delay)
2026-01-20 23:44:41,117 - INFO - üìÅ Candles Data File: candles_data.json
2026-01-20 23:44:41,117 - INFO - üìÅ Trades Log File: trades.json
2026-01-20 23:44:41,117 - INFO - üìß Email Notifications: Enabled
2026-01-20 23:44:41,117 - INFO - ================================================================================
2026-01-20 23:44:41,117 - INFO - ================================================================================
2026-01-20 23:44:41,117 - INFO - STARTING KITE DATA FETCHER & TRADING SERVER
2026-01-20 23:44:41,117 - INFO - ================================================================================
2026-01-20 23:44:41,117 - INFO - Attempting to connect to Kite API...
2026-01-20 23:44:41,117 - INFO - Reading access token from file: access_token.txt
2026-01-20 23:44:41,118 - INFO - Access token loaded: JMrhfgQBfb...
2026-01-20 23:44:41,118 - INFO - Initializing KiteConnect instance
2026-01-20 23:44:41,118 - INFO - Setting access token
2026-01-20 23:44:41,118 - INFO - Fetching FUT instrument...
2026-01-20 23:44:41,118 - INFO - Fetching CRUDEOIL futures instruments...
2026-01-20 23:44:41,893 - INFO - ‚úì Selected CRUDEOIL Futures: CRUDEOIL26FEBFUT
2026-01-20 23:44:41,893 - INFO -   Instrument Token: 119555335
2026-01-20 23:44:41,893 - INFO -   Expiry: 2026-02-19
2026-01-20 23:44:41,893 - INFO -   Lot Size: 100 units per lot (from .env)
2026-01-20 23:44:41,893 - INFO -   Trading: 2 lot(s) = 200 units
2026-01-20 23:44:41,898 - INFO - üîå Setting up WebSocket connection...
2026-01-20 23:44:42,006 - INFO - ‚úì WebSocket connected successfully
2026-01-20 23:44:42,006 - INFO - üì° Subscribed to CRUDEOIL26FEBFUT (119555335)
2026-01-20 23:44:42,006 - INFO - üìä WebSocket Mode: FULL (real-time OHLC + LTP for entry triggers)
2026-01-20 23:44:43,904 - INFO - ‚úì WebSocket setup complete
2026-01-20 23:44:43,904 - INFO - ‚úì Kite API connection established successfully
2026-01-20 23:44:43,904 - INFO - ‚è∞ Current time: 23:44:43
2026-01-20 23:44:43,904 - INFO - ‚è∞ Next candle completes at: 23:45:00
2026-01-20 23:44:43,904 - INFO - ‚è∞ Will fetch at: 23:45:10 (+10s delay)
2026-01-20 23:44:43,905 - INFO - ‚è∞ Waiting 26 seconds...
2026-01-20 23:44:43,905 - INFO - ‚è≥ Waiting for next 5-minute interval before first fetch...
2026-01-20 23:45:10,003 - INFO - ================================================================================
2026-01-20 23:45:10,004 - INFO - üîÑ CONFIG CHANGE DETECTED!
2026-01-20 23:45:10,004 - INFO -    File: config.json
2026-01-20 23:45:10,004 - INFO -    Flag 'is_changed' = true
2026-01-20 23:45:10,005 - INFO -    Changes will be applied in next 5-minute interval
2026-01-20 23:45:10,005 - INFO - ================================================================================
2026-01-20 23:45:10,005 - INFO - ‚öôÔ∏è  Applying configuration changes before next data fetch...
2026-01-20 23:45:10,005 - INFO - ================================================================================
2026-01-20 23:45:10,005 - INFO - üîÑ APPLYING CONFIGURATION CHANGES
2026-01-20 23:45:10,005 - INFO - ================================================================================
2026-01-20 23:45:10,005 - INFO - üìã Loading configuration from config.json...
2026-01-20 23:45:10,005 - INFO - ‚úì Configuration loaded successfully
2026-01-20 23:45:10,005 - INFO -   üìà Instrument: CRUDEOIL
2026-01-20 23:45:10,005 - INFO -   üè¢ Exchange: MCX
2026-01-20 23:45:10,005 - INFO -   üìä Type: FUT
2026-01-20 23:45:10,007 - INFO -   üìè High-Low Diff: 15.0
2026-01-20 23:45:10,007 - INFO -   üéØ Target: 10.0
2026-01-20 23:45:10,007 - INFO -   üì¶ Lots: 2
2026-01-20 23:45:10,007 - INFO -   üì¶ Lot Size: 100
2026-01-20 23:45:10,007 - INFO -   üì¶ Total Quantity: 200
2026-01-20 23:45:10,007 - INFO -   üíº Trading Mode: PAPER
2026-01-20 23:45:10,007 - INFO - üìä Instrument unchanged - keeping existing connection
2026-01-20 23:45:10,008 - INFO - ‚úÖ Configuration changes applied successfully
2026-01-20 23:45:10,008 - INFO - ================================================================================
2026-01-20 23:45:10,008 - INFO - üîÑ Starting data fetch at 23:45:10
2026-01-20 23:45:10,008 - INFO - --------------------------------------------------------------------------------
2026-01-20 23:45:10,008 - INFO - Starting historical data fetch...
2026-01-20 23:45:10,008 - INFO - Instrument Token (int): 119555335
2026-01-20 23:45:10,008 - INFO - Fetching data from last 10 days (up to now)...
2026-01-20 23:45:10,008 - INFO - From: 2026-01-10 23:45:10
2026-01-20 23:45:10,008 - INFO - To: 2026-01-20 23:45:10
2026-01-20 23:45:10,008 - INFO - Interval: 5minute
2026-01-20 23:45:10,008 - INFO - Calling Kite API for historical data...
2026-01-20 23:45:10,119 - INFO - ‚úì Received 1156 candles from API
2026-01-20 23:45:10,119 - INFO - ‚ÑπÔ∏è  Excluding current candle (still forming) - using 1155 complete candles
2026-01-20 23:45:10,119 - INFO - Calculating RSI (14-period) on complete candles...
2026-01-20 23:45:10,126 - ERROR - ‚úó Error fetching historical data: input array type is not double
2026-01-20 23:45:10,126 - ERROR - Error type: Exception
2026-01-20 23:45:10,127 - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/ganeshghatti/Documents/Auto-trading/websocket_server.py", line 1281, in fetch_historical_data
    rsi_values, latest_rsi = self.calculate_rsi(complete_candles)
                             ~~~~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^
  File "/Users/ganeshghatti/Documents/Auto-trading/websocket_server.py", line 809, in calculate_rsi
    rsi_values = talib.RSI(closes, timeperiod=14)
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/talib/__init__.py", line 80, in wrapper
    result = func(*_args, **_kwds)
  File "talib/_func.pxi", line 4477, in talib._ta_lib.RSI
  File "talib/_func.pxi", line 22, in talib._ta_lib.check_array
Exception: input array type is not double

2026-01-20 23:45:10,127 - WARNING - ‚ö† Data fetch failed. Connection might be lost.
2026-01-20 23:45:10,127 - WARNING - ‚ö† Not connected. Retrying in 300 seconds...
2026-01-20 23:50:10,134 - INFO - Attempting to connect to Kite API...
2026-01-20 23:50:10,136 - INFO - Reading access token from file: access_token.txt
2026-01-20 23:50:10,138 - INFO - Access token loaded: JMrhfgQBfb...
2026-01-20 23:50:10,138 - INFO - Initializing KiteConnect instance
2026-01-20 23:50:10,143 - INFO - Setting access token
2026-01-20 23:50:10,143 - INFO - Fetching FUT instrument...
2026-01-20 23:50:10,143 - INFO - Fetching CRUDEOIL futures instruments...
2026-01-20 23:50:10,925 - INFO - ‚úì Selected CRUDEOIL Futures: CRUDEOIL26FEBFUT
2026-01-20 23:50:10,925 - INFO -   Instrument Token: 119555335
2026-01-20 23:50:10,925 - INFO -   Expiry: 2026-02-19
2026-01-20 23:50:10,925 - INFO -   Lot Size: 100 units per lot (from .env)
2026-01-20 23:50:10,925 - INFO -   Trading: 2 lot(s) = 200 units
2026-01-20 23:50:10,930 - INFO - üîå Setting up WebSocket connection...
2026-01-20 23:50:11,880 - INFO - ‚úì WebSocket connected successfully
2026-01-20 23:50:11,880 - INFO - üì° Subscribed to CRUDEOIL26FEBFUT (119555335)
2026-01-20 23:50:11,880 - INFO - üìä WebSocket Mode: FULL (real-time OHLC + LTP for entry triggers)
2026-01-20 23:50:12,936 - INFO - ‚úì WebSocket setup complete
2026-01-20 23:50:12,936 - INFO - ‚úì Kite API connection established successfully
2026-01-20 23:50:12,936 - INFO - ‚è∞ Current time: 23:50:12
2026-01-20 23:50:12,936 - INFO - ‚è∞ Next candle completes at: 23:55:00
2026-01-20 23:50:12,936 - INFO - ‚è∞ Will fetch at: 23:55:10 (+10s delay)
2026-01-20 23:50:12,936 - INFO - ‚è∞ Waiting 297 seconds...
2026-01-20 23:50:12,936 - INFO - ‚è≥ Reconnected! Waiting for next 5-minute interval before fetching...
2026-01-20 23:55:10,005 - INFO - ================================================================================
2026-01-20 23:55:10,007 - INFO - üîÑ CONFIG CHANGE DETECTED!
2026-01-20 23:55:10,007 - INFO -    File: config.json
2026-01-20 23:55:10,007 - INFO -    Flag 'is_changed' = true
2026-01-20 23:55:10,007 - INFO -    Changes will be applied in next 5-minute interval
2026-01-20 23:55:10,007 - INFO - ================================================================================
2026-01-20 23:55:10,007 - INFO - ‚öôÔ∏è  Applying configuration changes before next data fetch...
2026-01-20 23:55:10,007 - INFO - ================================================================================
2026-01-20 23:55:10,007 - INFO - üîÑ APPLYING CONFIGURATION CHANGES
2026-01-20 23:55:10,007 - INFO - ================================================================================
2026-01-20 23:55:10,007 - INFO - üìã Loading configuration from config.json...
2026-01-20 23:55:10,008 - INFO - ‚úì Configuration loaded successfully
2026-01-20 23:55:10,008 - INFO -   üìà Instrument: CRUDEOIL
2026-01-20 23:55:10,008 - INFO -   üè¢ Exchange: MCX
2026-01-20 23:55:10,008 - INFO -   üìä Type: FUT
2026-01-20 23:55:10,008 - INFO -   üìè High-Low Diff: 15.0
2026-01-20 23:55:10,008 - INFO -   üéØ Target: 10.0
2026-01-20 23:55:10,008 - INFO -   üì¶ Lots: 2
2026-01-20 23:55:10,008 - INFO -   üì¶ Lot Size: 100
2026-01-20 23:55:10,008 - INFO -   üì¶ Total Quantity: 200
2026-01-20 23:55:10,008 - INFO -   üíº Trading Mode: PAPER
2026-01-20 23:55:10,008 - INFO - üìä Instrument unchanged - keeping existing connection
2026-01-20 23:55:10,008 - INFO - ‚úÖ Configuration changes applied successfully
2026-01-20 23:55:10,008 - INFO - ================================================================================
2026-01-20 23:55:10,008 - INFO - üîÑ Starting data fetch at 23:55:10
2026-01-20 23:55:10,008 - INFO - --------------------------------------------------------------------------------
2026-01-20 23:55:10,008 - INFO - Starting historical data fetch...
2026-01-20 23:55:10,008 - INFO - Instrument Token (int): 119555335
2026-01-20 23:55:10,008 - INFO - Fetching data from last 10 days (up to now)...
2026-01-20 23:55:10,008 - INFO - From: 2026-01-10 23:55:10
2026-01-20 23:55:10,008 - INFO - To: 2026-01-20 23:55:10
2026-01-20 23:55:10,008 - INFO - Interval: 5minute
2026-01-20 23:55:10,008 - INFO - Calling Kite API for historical data...
2026-01-20 23:55:10,113 - INFO - ‚úì Received 1157 candles from API
2026-01-20 23:55:10,115 - INFO - ‚ÑπÔ∏è  Excluding current candle (still forming) - using 1156 complete candles
2026-01-20 23:55:10,115 - INFO - Calculating RSI (14-period) on complete candles...
2026-01-20 23:55:10,121 - ERROR - ‚úó Error fetching historical data: input array type is not double
2026-01-20 23:55:10,121 - ERROR - Error type: Exception
2026-01-20 23:55:10,122 - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/ganeshghatti/Documents/Auto-trading/websocket_server.py", line 1281, in fetch_historical_data
    # Calculate RSI on complete candles only
  File "/Users/ganeshghatti/Documents/Auto-trading/websocket_server.py", line 809, in calculate_rsi
  File "/Users/ganeshghatti/Documents/Auto-trading/venv/lib/python3.14/site-packages/talib/__init__.py", line 80, in wrapper
    result = func(*_args, **_kwds)
  File "talib/_func.pxi", line 4477, in talib._ta_lib.RSI
  File "talib/_func.pxi", line 22, in talib._ta_lib.check_array
Exception: input array type is not double

2026-01-20 23:55:10,122 - WARNING - ‚ö† Data fetch failed. Connection might be lost.
2026-01-20 23:55:10,122 - WARNING - ‚ö† Not connected. Retrying in 300 seconds...
2026-01-20 23:56:31,322 - INFO - 
================================================================================
2026-01-20 23:56:31,323 - INFO - Server stopped by user (Ctrl+C)
2026-01-20 23:56:31,323 - INFO - ================================================================================
2026-01-20 23:56:32,919 - INFO - ================================================================================
2026-01-20 23:56:32,919 - INFO - Initializing Kite Data Fetcher Server
2026-01-20 23:56:32,919 - INFO - ================================================================================
2026-01-20 23:56:32,919 - INFO - Loading environment variables from .env file
2026-01-20 23:56:32,919 - INFO - API_KEY loaded: lo8381a8...
2026-01-20 23:56:32,919 - INFO - üìã Loading configuration from config.json...
2026-01-20 23:56:32,919 - INFO - ‚úì Configuration loaded successfully
2026-01-20 23:56:32,919 - INFO -   üìà Instrument: CRUDEOIL
2026-01-20 23:56:32,919 - INFO -   üè¢ Exchange: MCX
2026-01-20 23:56:32,919 - INFO -   üìä Type: FUT
2026-01-20 23:56:32,919 - INFO -   üìè High-Low Diff: 15.0
2026-01-20 23:56:32,919 - INFO -   üéØ Target: 10.0
2026-01-20 23:56:32,919 - INFO -   üì¶ Lots: 2
2026-01-20 23:56:32,919 - INFO -   üì¶ Lot Size: 100
2026-01-20 23:56:32,919 - INFO -   üì¶ Total Quantity: 200
2026-01-20 23:56:32,919 - INFO -   üíº Trading Mode: PAPER
2026-01-20 23:56:32,919 - INFO - üìä Trading Mode: PAPER
2026-01-20 23:56:32,919 - INFO - üì¶ Trade Quantity: 2 lot(s)
2026-01-20 23:56:32,919 - INFO - üîÑ Retry Interval: 300 seconds
2026-01-20 23:56:32,920 - INFO - ‚è±Ô∏è  Fetch Interval: 300 seconds (5-min aligned + 10s delay)
2026-01-20 23:56:32,920 - INFO - üìÅ Candles Data File: candles_data.json
2026-01-20 23:56:32,920 - INFO - üìÅ Trades Log File: trades.json
2026-01-20 23:56:32,920 - INFO - üìß Email Notifications: Enabled
2026-01-20 23:56:32,920 - INFO - ================================================================================
2026-01-20 23:56:32,920 - INFO - ================================================================================
2026-01-20 23:56:32,920 - INFO - STARTING KITE DATA FETCHER & TRADING SERVER
2026-01-20 23:56:32,920 - INFO - ================================================================================
2026-01-20 23:56:32,920 - INFO - Attempting to connect to Kite API...
2026-01-20 23:56:32,920 - INFO - Reading access token from file: access_token.txt
2026-01-20 23:56:32,920 - INFO - Access token loaded: JMrhfgQBfb...
2026-01-20 23:56:32,920 - INFO - Initializing KiteConnect instance
2026-01-20 23:56:32,920 - INFO - Setting access token
2026-01-20 23:56:32,920 - INFO - Fetching FUT instrument...
2026-01-20 23:56:32,920 - INFO - Fetching CRUDEOIL futures instruments...
2026-01-20 23:56:33,665 - INFO - ‚úì Selected CRUDEOIL Futures: CRUDEOIL26FEBFUT
2026-01-20 23:56:33,665 - INFO -   Instrument Token: 119555335
2026-01-20 23:56:33,665 - INFO -   Expiry: 2026-02-19
2026-01-20 23:56:33,665 - INFO -   Lot Size: 100 units per lot (from .env)
2026-01-20 23:56:33,665 - INFO -   Trading: 2 lot(s) = 200 units
2026-01-20 23:56:33,670 - INFO - üîå Setting up WebSocket connection...
2026-01-20 23:56:33,777 - INFO - ‚úì WebSocket connected successfully
2026-01-20 23:56:33,777 - INFO - üì° Subscribed to CRUDEOIL26FEBFUT (119555335)
2026-01-20 23:56:33,777 - INFO - üìä WebSocket Mode: FULL (real-time OHLC + LTP for entry triggers)
2026-01-20 23:56:35,675 - INFO - ‚úì WebSocket setup complete
2026-01-20 23:56:35,676 - INFO - ‚úì Kite API connection established successfully
2026-01-20 23:56:35,676 - INFO - ‚è∞ Current time: 23:56:35
2026-01-20 23:56:35,676 - INFO - ‚è∞ Next candle completes at: 00:00:00
2026-01-20 23:56:35,677 - INFO - ‚è∞ Will fetch at: 00:00:10 (+10s delay)
2026-01-20 23:56:35,677 - INFO - ‚è∞ Waiting -86185 seconds...
2026-01-20 23:56:35,677 - INFO - ‚è≥ Waiting for next 5-minute interval before first fetch...
2026-01-20 23:56:35,677 - ERROR - 
================================================================================
2026-01-20 23:56:35,677 - ERROR - FATAL ERROR: sleep length must be non-negative
2026-01-20 23:56:35,677 - ERROR - Error type: ValueError
2026-01-20 23:56:35,678 - ERROR - Traceback: Traceback (most recent call last):
  File "/Users/ganeshghatti/Documents/Auto-trading/websocket_server.py", line 1432, in main
    fetcher.run()
    ~~~~~~~~~~~^^
  File "/Users/ganeshghatti/Documents/Auto-trading/websocket_server.py", line 1376, in run
    time.sleep(wait_time)
    ~~~~~~~~~~^^^^^^^^^^^
ValueError: sleep length must be non-negative

2026-01-20 23:56:35,678 - ERROR - ================================================================================
