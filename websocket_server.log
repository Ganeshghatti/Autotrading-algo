2026-01-08 12:21:48,942 - INFO - ================================================================================
2026-01-08 12:21:48,943 - INFO - Initializing Kite Data Fetcher Server
2026-01-08 12:21:48,943 - INFO - ================================================================================
2026-01-08 12:21:48,943 - INFO - Loading environment variables from .env file
2026-01-08 12:21:48,943 - INFO - API_KEY loaded: lo8381a8...
2026-01-08 12:21:48,943 - INFO - üìÑ Loaded configuration from config.json:
2026-01-08 12:21:48,943 - INFO -    Instrument: BANKNIFTY
2026-01-08 12:21:48,943 - INFO -    Exchange: NFO
2026-01-08 12:21:48,943 - INFO -    Type: FUT
2026-01-08 12:21:48,943 - INFO -    Lots: 2
2026-01-08 12:21:48,943 - INFO -    Target: 100 points
2026-01-08 12:21:48,943 - INFO -    High-Low Diff: 500 points
2026-01-08 12:21:48,944 - INFO - üìä Trading Mode: PAPER
2026-01-08 12:21:48,944 - INFO - üì¶ Trade Quantity: 2 lot(s)
2026-01-08 12:21:48,944 - INFO - üîÑ Retry Interval: 300 seconds
2026-01-08 12:21:48,944 - INFO - ‚è±Ô∏è Fetch Interval: 300 seconds (5-min aligned + 10s delay)
2026-01-08 12:21:48,944 - INFO - üìÅ Candles Data File: candles_data.json
2026-01-08 12:21:48,944 - INFO - üìÅ Trades Log File: trades.json
2026-01-08 12:21:48,944 - INFO - üìß Email Notifications: Enabled
2026-01-08 12:21:48,944 - INFO - ================================================================================
2026-01-08 12:21:48,944 - INFO - ================================================================================
2026-01-08 12:21:48,944 - INFO - STARTING KITE DATA FETCHER & TRADING SERVER
2026-01-08 12:21:48,944 - INFO - ================================================================================
2026-01-08 12:21:48,944 - INFO - Attempting to connect to Kite API...
2026-01-08 12:21:48,944 - INFO - Reading access token from file: access_token.txt
2026-01-08 12:21:48,944 - INFO - Access token loaded: QF9l6i7per...
2026-01-08 12:21:48,944 - INFO - Initializing KiteConnect instance
2026-01-08 12:21:48,944 - INFO - Setting access token
2026-01-08 12:21:48,944 - INFO - üì° Fetching instrument: BANKNIFTY (FUT) from NFO...
2026-01-08 12:21:48,944 - INFO - ‚ÑπÔ∏è  Base symbol detected: 'BANKNIFTY'
2026-01-08 12:21:48,944 - INFO -    System will auto-select nearest FUT expiry
2026-01-08 12:21:49,790 - INFO - ‚úì Found 3 matching instruments
2026-01-08 12:21:49,790 - INFO -    Selecting nearest expiry...
2026-01-08 12:21:49,790 - INFO -    Available expiries: 2026-01-27, 2026-02-24, 2026-03-30
2026-01-08 12:21:49,790 - WARNING - ‚ö† API lot size (30) differs from config (15)
2026-01-08 12:21:49,790 - WARNING -    Using config value: 15
2026-01-08 12:21:49,790 - INFO - ================================================================================
2026-01-08 12:21:49,790 - INFO - ‚úÖ INSTRUMENT SELECTED: BANKNIFTY26JANFUT
2026-01-08 12:21:49,790 - INFO -   üìå Instrument Token: 12601346
2026-01-08 12:21:49,790 - INFO -   üìå Exchange: NFO
2026-01-08 12:21:49,790 - INFO -   üìå Type: FUT
2026-01-08 12:21:49,790 - INFO -   üìÖ Expiry: 2026-01-27
2026-01-08 12:21:49,790 - INFO -   üì¶ Lot Size: 15 units per lot
2026-01-08 12:21:49,790 - INFO -   üíº Trading: 2 lot(s) √ó 15 units = 30 total units
2026-01-08 12:21:49,791 - INFO - ================================================================================
2026-01-08 12:21:49,794 - INFO - üîå Setting up WebSocket connection...
2026-01-08 12:21:50,082 - ERROR - ‚úó WebSocket error: 1006 - connection was closed uncleanly (WebSocket connection upgrade failed (403 - Forbidden))
2026-01-08 12:21:50,082 - WARNING - ‚ö† WebSocket closed: 1006 - connection was closed uncleanly (WebSocket connection upgrade failed (403 - Forbidden))
2026-01-08 12:21:51,799 - INFO - ‚úì WebSocket setup complete
2026-01-08 12:21:51,800 - INFO - ‚úì Kite API connection established successfully
2026-01-08 12:21:51,800 - INFO - ‚è∞ Current time: 12:21:51
2026-01-08 12:21:51,800 - INFO - ‚è∞ Next candle completes at: 12:25:00
2026-01-08 12:21:51,800 - INFO - ‚è∞ Will fetch at: 12:25:10 (+10s delay)
2026-01-08 12:21:51,800 - INFO - ‚è∞ Waiting 198 seconds...
2026-01-08 12:21:51,801 - INFO - ‚è≥ Waiting for next 5-minute interval before first fetch...
2026-01-08 12:21:53,308 - ERROR - ‚úó WebSocket error: 1006 - connection was closed uncleanly (WebSocket connection upgrade failed (403 - Forbidden))
2026-01-08 12:21:53,308 - WARNING - ‚ö† WebSocket closed: 1006 - connection was closed uncleanly (WebSocket connection upgrade failed (403 - Forbidden))
2026-01-08 12:22:01,397 - ERROR - ‚úó WebSocket error: 1006 - connection was closed uncleanly (WebSocket connection upgrade failed (403 - Forbidden))
2026-01-08 12:22:01,399 - WARNING - ‚ö† WebSocket closed: 1006 - connection was closed uncleanly (WebSocket connection upgrade failed (403 - Forbidden))
2026-01-08 12:22:04,790 - INFO - 
================================================================================
2026-01-08 12:22:04,790 - INFO - Server stopped by user (Ctrl+C)
2026-01-08 12:22:04,790 - INFO - ================================================================================
2026-01-08 13:25:04,548 - INFO - ================================================================================
2026-01-08 13:25:04,549 - INFO - Initializing Kite Data Fetcher Server
2026-01-08 13:25:04,549 - INFO - ================================================================================
2026-01-08 13:25:04,549 - INFO - Loading environment variables from .env file
2026-01-08 13:25:04,549 - INFO - API_KEY loaded: lo8381a8...
2026-01-08 13:25:04,549 - INFO - üìã Loading configuration from config.json...
2026-01-08 13:25:04,549 - INFO - ‚úì Configuration loaded successfully
2026-01-08 13:25:04,549 - INFO -   üìà Instrument: BANKNIFTY
2026-01-08 13:25:04,549 - INFO -   üè¢ Exchange: NFO
2026-01-08 13:25:04,549 - INFO -   üìä Type: FUT
2026-01-08 13:25:04,549 - INFO -   üìè High-Low Diff: 35.0
2026-01-08 13:25:04,549 - INFO -   üéØ Target: 100.0
2026-01-08 13:25:04,549 - INFO -   üì¶ Lots: 1
2026-01-08 13:25:04,549 - INFO -   üì¶ Lot Size: 30
2026-01-08 13:25:04,549 - INFO -   üì¶ Total Quantity: 30
2026-01-08 13:25:04,549 - INFO - üìä Trading Mode: PAPER
2026-01-08 13:25:04,549 - INFO - üì¶ Trade Quantity: 1 lot(s)
2026-01-08 13:25:04,549 - INFO - üîÑ Retry Interval: 300 seconds
2026-01-08 13:25:04,549 - INFO - ‚è±Ô∏è  Fetch Interval: 300 seconds (5-min aligned + 10s delay)
2026-01-08 13:25:04,549 - INFO - üìÅ Candles Data File: candles_data.json
2026-01-08 13:25:04,549 - INFO - üìÅ Trades Log File: trades.json
2026-01-08 13:25:04,549 - INFO - üìß Email Notifications: Enabled
2026-01-08 13:25:04,549 - INFO - ================================================================================
2026-01-08 13:25:04,549 - INFO - ================================================================================
2026-01-08 13:25:04,549 - INFO - STARTING KITE DATA FETCHER & TRADING SERVER
2026-01-08 13:25:04,549 - INFO - ================================================================================
2026-01-08 13:25:04,549 - INFO - Attempting to connect to Kite API...
2026-01-08 13:25:04,549 - INFO - Reading access token from file: access_token.txt
2026-01-08 13:25:04,549 - INFO - Access token loaded: 41lgtN2rPD...
2026-01-08 13:25:04,549 - INFO - Initializing KiteConnect instance
2026-01-08 13:25:04,550 - INFO - Setting access token
2026-01-08 13:25:04,550 - INFO - Fetching FUT instrument...
2026-01-08 13:25:04,550 - INFO - Fetching BANKNIFTY futures instruments...
2026-01-08 13:25:05,351 - INFO - ‚úì Selected BANKNIFTY Futures: BANKNIFTY26JANFUT
2026-01-08 13:25:05,351 - INFO -   Instrument Token: 12601346
2026-01-08 13:25:05,351 - INFO -   Expiry: 2026-01-27
2026-01-08 13:25:05,351 - INFO -   Lot Size: 30 units per lot (from .env)
2026-01-08 13:25:05,351 - INFO -   Trading: 1 lot(s) = 30 units
2026-01-08 13:25:05,354 - INFO - üîå Setting up WebSocket connection...
2026-01-08 13:25:05,609 - INFO - ‚úì WebSocket connected successfully
2026-01-08 13:25:05,609 - INFO - üì° Subscribed to BANKNIFTY26JANFUT (12601346)
2026-01-08 13:25:05,609 - INFO - üìä WebSocket Mode: FULL (real-time OHLC + LTP for entry triggers)
2026-01-08 13:25:07,360 - INFO - ‚úì WebSocket setup complete
2026-01-08 13:25:07,360 - INFO - ‚úì Kite API connection established successfully
2026-01-08 13:25:07,360 - INFO - ‚è∞ Current time: 13:25:07
2026-01-08 13:25:07,360 - INFO - ‚è∞ Next candle completes at: 13:30:00
2026-01-08 13:25:07,360 - INFO - ‚è∞ Will fetch at: 13:30:10 (+10s delay)
2026-01-08 13:25:07,360 - INFO - ‚è∞ Waiting 302 seconds...
2026-01-08 13:25:07,360 - INFO - ‚è≥ Waiting for next 5-minute interval before first fetch...
2026-01-08 13:30:10,012 - INFO - üîÑ Starting data fetch at 13:30:10
2026-01-08 13:30:10,013 - INFO - --------------------------------------------------------------------------------
2026-01-08 13:30:10,013 - INFO - Starting historical data fetch...
2026-01-08 13:30:10,013 - INFO - Instrument Token (int): 12601346
2026-01-08 13:30:10,013 - INFO - Fetching data from last 10 days (up to now)...
2026-01-08 13:30:10,013 - INFO - From: 2025-12-29 13:30:10
2026-01-08 13:30:10,013 - INFO - To: 2026-01-08 13:30:10
2026-01-08 13:30:10,013 - INFO - Interval: 5minute
2026-01-08 13:30:10,013 - INFO - Calling Kite API for historical data...
2026-01-08 13:30:10,135 - INFO - ‚úì Received 601 candles from API
2026-01-08 13:30:10,135 - INFO - ‚ÑπÔ∏è  Excluding current candle (still forming) - using 600 complete candles
2026-01-08 13:30:10,135 - INFO - Calculating RSI (14-period) on complete candles...
2026-01-08 13:30:10,145 - INFO - üìä Latest RSI: 40.57
2026-01-08 13:30:10,145 - INFO - üìä Filtered latest 14 candles
2026-01-08 13:30:10,145 - INFO - üìÖ Data range: 2026-01-08 12:20 to 2026-01-08 13:25
2026-01-08 13:30:10,145 - INFO - Processing candle data with RSI...
2026-01-08 13:30:10,145 - INFO - üîç Checking order conditions...
2026-01-08 13:30:10,145 - INFO - ‚ÑπÔ∏è  TRADE SKIPPED - RSI not available or first calculation
2026-01-08 13:30:10,145 - INFO - Saving 14 candles to candles_data.json...
2026-01-08 13:30:10,146 - INFO - ‚úì Successfully saved 14 candles to candles_data.json
2026-01-08 13:30:10,146 - INFO - File size: 2357 bytes
2026-01-08 13:30:10,146 - INFO - --------------------------------------------------------------------------------
2026-01-08 13:30:10,146 - INFO - üìä LATEST CANDLE SUMMARY:
2026-01-08 13:30:10,146 - INFO -   üïê Date: 2026-01-08T13:25:00+05:30
2026-01-08 13:30:10,146 - INFO -   üíπ Open: 59884.4
2026-01-08 13:30:10,146 - INFO -   ‚¨ÜÔ∏è  High: 59896.4
2026-01-08 13:30:10,146 - INFO -   ‚¨áÔ∏è  Low: 59853.4
2026-01-08 13:30:10,146 - INFO -   üíµ Close: 59853.4
2026-01-08 13:30:10,146 - INFO -   üì¶ Volume: 4890
2026-01-08 13:30:10,146 - INFO -   üìà RSI: 40.566594404935756
2026-01-08 13:30:10,146 - INFO - --------------------------------------------------------------------------------
2026-01-08 13:30:10,146 - INFO - ‚úì Data fetch complete at 13:30:10
2026-01-08 13:30:10,146 - INFO - ================================================================================
2026-01-08 13:30:10,146 - INFO - ‚è∞ Current time: 13:30:10
2026-01-08 13:30:10,147 - INFO - ‚è∞ Next candle completes at: 13:35:00
2026-01-08 13:30:10,147 - INFO - ‚è∞ Will fetch at: 13:35:10 (+10s delay)
2026-01-08 13:30:10,147 - INFO - ‚è∞ Waiting 299 seconds...
